#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/wf/header.h"

const LevelScript level_wf_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _wf_segment_7SegmentRomStart, _wf_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0A, _bitfs_skybox_mio0SegmentRomStart, _bitfs_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _grass_mio0SegmentRomStart, _grass_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group1_mio0SegmentRomStart, _group1_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group1_geoSegmentRomStart, _group1_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group14_mio0SegmentRomStart, _group14_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_2), 
	JUMP_LINK(script_func_global_15), 
	LOAD_MODEL_FROM_GEO(MODEL_THI_WARP_PIPE, warp_pipe_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BUBBLY_TREE, bubbly_tree_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_03, wf_geo_0007E0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_04, wf_geo_000820), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_05, wf_geo_000860), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_06, wf_geo_000878), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_07, wf_geo_000890), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_08, wf_geo_0008A8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_09, wf_geo_0008E8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0A, wf_geo_000900), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0C, wf_geo_000940), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_GIANT_POLE, wf_geo_000AE0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0E, wf_geo_000958), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0F, wf_geo_0009A0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_ROTATING_PLATFORM, wf_geo_0009B8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_11, wf_geo_0009D0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_12, wf_geo_0009E8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_SMALL_BOMP, wf_geo_000A00), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_LARGE_BOMP, wf_geo_000A40), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_ROTATING_WOODEN_PLATFORM, wf_geo_000A58), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_SLIDING_PLATFORM, wf_geo_000A98), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TUMBLING_BRIDGE_PART, wf_geo_000AB0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TUMBLING_BRIDGE, wf_geo_000AC8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_TRAPEZOID_PLATORM, wf_geo_000AF8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM, wf_geo_000B10), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM_UNUSED, wf_geo_000B38), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM_ELEVATOR, wf_geo_000B60), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BREAKABLE_WALL_RIGHT, wf_geo_000B78), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BREAKABLE_WALL_LEFT, wf_geo_000B90), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_KICKABLE_BOARD, wf_geo_000BA8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_DOOR, wf_geo_000BE0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_KICKABLE_BOARD_FELLED, wf_geo_000BC8), 

	AREA(1, wf_area_1),
		WARP_NODE(0x0A, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(250, LEVEL_CASTLE_GROUNDS, 0x01, 2, WARP_NO_CHECKPOINT),
		WARP_NODE(251, LEVEL_CASTLE_GROUNDS, 0x01, 3, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_WF, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0D, LEVEL_WF, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -13951, 2058, 8253, 0, 0, 0, 0x000C0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -7, 6954, 1, 0, 0, 0, 0, bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, 1546, 7601, -950, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -1664, 7601, -950, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -1664, 7601, 953, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, 1527, 7601, 953, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLACK_BOBOMB, 10587, 6621, 12311, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, 7860, 6621, 8912, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_CHUCKYA, 8641, 6734, 10494, 0, -46, 0, 0, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 13671, 6621, 3259, 0, 0, 0, 0, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, -158, 147, 6606, 0, -46, 0, 0, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 3104, 394, 5974, 0, -46, 0, 0, bhvChuckya),
		OBJECT(0, 193, 1742, -519, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -410, 3151, 16, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 397, 4314, 229, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -6375, 3223, -10802, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -4879, 1975, -8393, 0, 90, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -7984, 2580, -6862, 0, 90, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -2256, 1632, -6155, 0, -45, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -2848, 1632, -6218, 0, 45, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -417, 496, -2570, 0, 82, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 5, 826, 799, 0, -180, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -4, 1107, 1028, 0, -180, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 8726, 1411, 10821, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 8122, 2819, 11356, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 8930, 3982, 11569, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -47, 6317, 3794, 0, -180, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, 263, 6092, 8583, 0, -147, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -11918, 2294, -3870, 0, 0, 0, 0, bhvCoinFormation),
		OBJECT(0, -9954, 3474, -6894, 0, 90, 0, 0, bhvCoinFormation),
		OBJECT(0, -5540, 6682, -5435, 0, 90, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -11043, 1768, 5630, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -10976, 3474, 8252, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 7135, 5524, 7601, 0, 25, 0, 0, bhvCoinFormation),
		OBJECT(0, 7477, 6300, 3897, 0, -46, 0, 0, bhvCoinFormation),
		OBJECT(0, -10564, 2562, 6732, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -13047, 3450, 7929, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -14150, 1603, 8245, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 10770, 6787, 2447, 0, -104, 0, 0, bhvCoinFormation),
		OBJECT(0, 10391, 7925, 9214, 0, -47, 0, 0, bhvCoinFormation),
		OBJECT(0, 8037, 6809, 9837, 0, -137, 0, 0, bhvCoinFormation),
		OBJECT(0, 9015, 6809, 10851, 0, -137, 0, 0, bhvCoinFormation),
		OBJECT(0, 8102, 6078, 13520, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 6317, 6078, 11414, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 9697, 6225, 3756, 0, 178, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, 9606, 6071, 5700, 0, 178, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, -4326, 651, 486, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -4886, 729, 2015, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -3873, 396, 2072, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 9556, 3835, -5710, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 14318, 6291, -4820, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 13900, 6026, -6789, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 9756, 5290, 2198, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 9756, 6701, 2198, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, -11993, 1832, 3253, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 5760, 442, 5159, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 9755, 1593, 2212, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(0, 2832, 185, 9850, 0, 25, 0, 0x00020000, bhvCoinFormation),
		OBJECT(255, -9627, 6349, -6381, 0, 0, 0, 0, WaterCube_Circular),
		OBJECT(255, -4407, 6349, -6381, 0, -180, 0, 0, WaterCube_Circular),
		OBJECT(255, 3994, 535, 8045, 0, -10, 0, 0, WaterCube_Circular_Small),
		OBJECT(255, 6089, 535, 8405, 0, 170, 0, 0, WaterCube_Circular_Small),
		OBJECT(MODEL_BOWLING_BALL, -12019, 1905, 10397, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -13034, 3507, 8219, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -12019, 1905, 10635, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -12019, 1905, 10902, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -8800, 3058, -6883, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -5952, 3275, -10354, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 9725, 7053, 2209, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 4075, 581, 11126, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(0, 4, 6335, 1584, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(0, -110, 6335, -1607, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(0, 5575, 5641, 5194, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(0, 9412, 6637, 2280, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(0, 9412, 5372, 2280, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(0, 9674, 5394, 8852, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_WF_LARGE_BOMP, -13097, 1516, 6927, 0, -180, 0, 0, bhvLargeBomp),
		OBJECT(MODEL_WF_LARGE_BOMP, -13097, 1516, 9428, 0, -180, 0, 0, bhvLargeBomp),
		OBJECT(MODEL_WF_LARGE_BOMP, -10897, 1516, 8371, 0, 0, 0, 0, bhvLargeBomp),
		OBJECT(MODEL_RED_COIN, 2809, 2647, 9907, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5784, 508, 5171, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 8461, 1945, 5366, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 9734, 1945, 2213, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 742, 392, 8563, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5120, 653, 8223, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 6503, 841, 8416, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 3780, 920, 12460, 0, 0, 0, 0x05000000, bhvRedCoin),
		OBJECT(254, 7142, 6414, 12408, 0, 38, 0, 0x00000000, bhv_Rot_Gear_Large),
		OBJECT(254, 8498, 813, 5355, 0, 38, 0, 0x00000000, bhv_Rot_Gear_Large),
		OBJECT(254, 13423, 7609, 3731, 0, 0, 0, 0x00000000, bhv_Rot_Gear),
		OBJECT(MODEL_WF_SMALL_BOMP, -11995, 3319, 7997, 0, 90, 0, 0, bhvSmallBomp),
		OBJECT(MODEL_WF_SMALL_BOMP, -12429, 3319, 8441, 0, -90, 0, 0, bhvSmallBomp),
		OBJECT(MODEL_STAR, 9720, 8550, 2215, 0, 0, 0, 0, bhvStar),
		OBJECT(MODEL_STAR, -12053, 4965, 8173, 0, 0, 0, 0x01000000, bhvStar),
		OBJECT(MODEL_STAR, -7019, 8353, -6391, 0, 0, 0, 0x04000000, bhvStar),
		OBJECT(MODEL_NONE, 8542, 281, 11281, 0, 0, 0, 0x05000000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_NONE, -29, 471, 8, 0, 0, 0, 0x000A0000, bhvSpinAirborneWarp),
		OBJECT(MODEL_THWOMP, -14049, 1565, 5746, 0, 90, 0, 0, bhvThwomp),
		OBJECT(MODEL_THWOMP, -14129, 1565, 10686, 0, 0, 0, 0, bhvThwomp),
		OBJECT(MODEL_THWOMP, -9921, 1565, 10723, 0, 90, 0, 0, bhvThwomp),
		OBJECT(MODEL_NONE, -12778, 1344, 8190, 0, 0, 0, 0x200B0000, bhvWarp),
		OBJECT(MODEL_NONE, 13829, 4763, -7284, 0, 0, 0, 0x500D0000, bhvWarp),
		OBJECT(255, 2452, 2292, -7228, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 11425, 8168, 3609, 0, 0, 0, 0, WaterCube_Static),
		OBJECT(255, 10817, 8314, 3153, 0, 0, 0, 0, WaterCube_Static),
		OBJECT(255, 6294, 6329, 11454, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 8094, 6357, 13515, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 6636, 1597, 4357, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 8659, 3548, -6382, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 13325, 5982, -3707, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 8240, 2697, -6947, 0, 0, 0, 0x00020000, WaterCube_UPDown),
		OBJECT(255, 1335, 2257, 10283, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(MODEL_WHOMP, -12991, 3352, 8127, 0, -180, 0, 0, bhvSmallWhomp),
		OBJECT(MODEL_WHOMP, -12991, 3352, 8342, 0, 0, 0, 0, bhvSmallWhomp),
		TERRAIN(wf_area_1_collision),
		MACRO_OBJECTS(wf_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 6),
		TERRAIN_TYPE(TERRAIN_STONE),
	END_AREA(),

	AREA(2, wf_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_WF, 0x02, 0x0B, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_WF, 0x01, 0x0C, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, 25, 1471, 2304, 0, 0, 0, 0x000B0000, bhvAirborneDeathWarp),
		OBJECT(MODEL_NONE, 26, 1471, 2303, 0, 0, 0, 0x000A0000, bhvAirborneWarp),
		OBJECT(0, 21, 1398, -2267, 0, -1, 0, 0, bhvCoinFormation),
		OBJECT(MODEL_STAR, 0, 3376, -9663, 0, 0, 0, 0x02000000, bhvStar),
		OBJECT(MODEL_THI_WARP_PIPE, 0, 2986, -10476, 0, 0, 0, 0x000C0000, bhvWarpPipe),
		TERRAIN(wf_area_2_collision),
		MACRO_OBJECTS(wf_area_2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 7),
		TERRAIN_TYPE(TERRAIN_STONE),
	END_AREA(),

	AREA(3, wf_area_3),
		WARP_NODE(0x0A, LEVEL_WF, 0x03, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_WF, 0x03, 0x0B, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0C, LEVEL_WF, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(MODEL_NONE, -2382, 109, -9457, 0, 0, 0, 0x000B0000, bhvAirborneDeathWarp),
		OBJECT(MODEL_HEART, -953, 57, -10398, 0, 0, 0, 0, bhvRecoveryHeart),
		OBJECT(MODEL_STAR, -1805, 4595, -9596, 0, 0, 0, 0x03000000, bhvStar),
		OBJECT(MODEL_NONE, -2382, 109, -9457, 0, 0, 0, 0x000A0000, bhvAirborneWarp),
		OBJECT(MODEL_THI_WARP_PIPE, 1566, -274, -9384, 0, 0, 0, 0x000C0000, bhvWarpPipe),
		TERRAIN(wf_area_3_collision),
		MACRO_OBJECTS(wf_area_3_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 8),
		TERRAIN_TYPE(TERRAIN_STONE),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
