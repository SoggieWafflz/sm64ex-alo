#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/wf/header.h"

const LevelScript level_wf_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _wf_segment_7SegmentRomStart, _wf_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0A, _water_skybox_mio0SegmentRomStart, _water_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _grass_mio0SegmentRomStart, _grass_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group1_mio0SegmentRomStart, _group1_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group1_geoSegmentRomStart, _group1_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group14_mio0SegmentRomStart, _group14_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group14_geoSegmentRomStart, _group14_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_2), 
	JUMP_LINK(script_func_global_15), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BUBBLY_TREE, bubbly_tree_geo), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_03, wf_geo_0007E0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_04, wf_geo_000820), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_05, wf_geo_000860), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_06, wf_geo_000878), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_07, wf_geo_000890), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_08, wf_geo_0008A8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_09, wf_geo_0008E8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0A, wf_geo_000900), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0C, wf_geo_000940), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_GIANT_POLE, wf_geo_000AE0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0E, wf_geo_000958), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_0F, wf_geo_0009A0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_ROTATING_PLATFORM, wf_geo_0009B8), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_11, wf_geo_0009D0), 
	LOAD_MODEL_FROM_GEO(MODEL_LEVEL_GEOMETRY_12, wf_geo_0009E8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_SMALL_BOMP, wf_geo_000A00), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_LARGE_BOMP, wf_geo_000A40), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_ROTATING_WOODEN_PLATFORM, wf_geo_000A58), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_SLIDING_PLATFORM, wf_geo_000A98), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TUMBLING_BRIDGE_PART, wf_geo_000AB0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TUMBLING_BRIDGE, wf_geo_000AC8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_TRAPEZOID_PLATORM, wf_geo_000AF8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM, wf_geo_000B10), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM_UNUSED, wf_geo_000B38), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_SQUARE_PLATORM_ELEVATOR, wf_geo_000B60), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BREAKABLE_WALL_RIGHT, wf_geo_000B78), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_BREAKABLE_WALL_LEFT, wf_geo_000B90), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_KICKABLE_BOARD, wf_geo_000BA8), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_TOWER_DOOR, wf_geo_000BE0), 
	LOAD_MODEL_FROM_GEO(MODEL_WF_KICKABLE_BOARD_FELLED, wf_geo_000BC8), 

	AREA(1, wf_area_1),
		WARP_NODE(6, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(5, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(4, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(3, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(2, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(1, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(0, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_CASTLE_GROUNDS, 1, 14, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_CASTLE_GROUNDS, 1, 20, WARP_NO_CHECKPOINT),
		WARP_NODE(14, LEVEL_WF, 1, 13, WARP_NO_CHECKPOINT),
		WARP_NODE(13, LEVEL_WF, 1, 14, WARP_NO_CHECKPOINT),
		WARP_NODE(14, LEVEL_WF, 1, 13, WARP_NO_CHECKPOINT),
		WARP_NODE(13, LEVEL_WF, 1, 14, WARP_NO_CHECKPOINT),
		WARP_NODE(10, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		OBJECT(195, -15344, 6770, -961, 0, 0, 0, 0x4a0000, bhvBobombBuddy),
		OBJECT(223, -2614, 3925, 11815, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 1648, 15846, -5733, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, -18031, 7369, -4557, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 2719, 3649, 6744, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 2983, 6662, -6025, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(194, 3995, 3057, 9385, 0, 0, 0, 0x0, bhvCirclingAmp),
		OBJECT(194, 4942, 4240, 12276, 0, 0, 0, 0x0, bhvCirclingAmp),
		OBJECT(194, -17310, 7349, -13432, 0, 0, 0, 0x0, bhvCirclingAmp),
		OBJECT(194, -12791, 6364, -1772, 0, 0, 0, 0x0, bhvCirclingAmp),
		OBJECT(194, -1159, 7056, -2063, 0, 0, 0, 0x0, bhvCirclingAmp),
		OBJECT(0, 629, 3794, 12907, 0, 100, 0, 0x0, bhvCoinFormation),
		OBJECT(0, -3843, 6056, -1159, 0, 172, 0, 0x0, bhvCoinFormation),
		OBJECT(0, -15609, 6423, 6493, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, -9526, 5155, -2304, 0, 44, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, 827, 2584, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 4806, 4331, 12297, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, -18429, 11805, -4725, 0, 88, 0, 0x110000, bhvCoinFormation),
		OBJECT_WITH_ACTS(0, 827, 3410, 6474, 0, 0, 0, 0x110000, bhvCoinFormation, ACT_1 | ACT_2 | ACT_3 | ACT_4),
		OBJECT(0, 827, 4294, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 5250, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 6173, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 7206, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 8225, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 9435, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 10533, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT_WITH_ACTS(0, 827, 11725, 6474, 0, 0, 0, 0x110000, bhvCoinFormation, ACT_1 | ACT_2 | ACT_3 | ACT_4 | ACT_6),
		OBJECT(0, 827, 12744, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 13773, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 827, 14827, 6474, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(137, 314, 16073, -6110, 0, -43, 0, 0x80000, bhvExclamationBox),
		OBJECT(0, -438, 2683, -5243, 0, -154, 0, 0xb0000, bhvFadingWarp),
		OBJECT(0, 1680, 3835, -5523, 0, -153, 0, 0xc0000, bhvFadingWarp),
		OBJECT_WITH_ACTS(0, -15563, -1221, 434, 0, 107, 0, 0xd0000, bhvFadingWarp, ACT_1 | ACT_2 | ACT_3 | ACT_4 | ACT_5),
		OBJECT_WITH_ACTS(0, -9588, 2653, 5270, 0, -151, 0, 0xe0000, bhvFadingWarp, ACT_1 | ACT_2 | ACT_3 | ACT_4 | ACT_5),
		OBJECT(180, -5068, 12292, -9195, 0, -95, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -5068, 8995, -9195, 0, -95, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -14593, 5952, 7008, 0, -95, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 2809, 3787, 4651, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 2510, 6950, -5837, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 2510, 7339, -5837, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 2510, 7142, -5837, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -5446, 4172, -7821, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -5551, 4275, -3055, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -7433, 4275, 7590, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -17267, 12609, 5017, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 3767, 3057, 8262, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -18629, 12659, 3079, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -18502, 12595, 1004, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(0, -4014, 6631, 258, 0, -95, 0, 0x0, bhvFlamethrower),
		OBJECT(0, -3889, 6631, 199, 0, 173, 0, 0x0, bhvFlamethrower),
		OBJECT(220, -7614, 16496, -11487, 0, 0, 0, 0x10000, bhvFlyGuy),
		OBJECT(220, -16742, 16595, 6895, 0, 0, 0, 0x0, bhvFlyGuy),
		OBJECT(220, 2965, 8541, -5254, 0, 0, 0, 0x0, bhvFlyGuy),
		OBJECT(220, 2791, 5230, -2023, 0, 0, 0, 0x0, bhvFlyGuy),
		OBJECT(192, 3154, 3441, 541, 0, 0, 0, 0x0, bhvGoomba),
		OBJECT(192, -18209, 12486, 5115, 0, 0, 0, 0x0, bhvGoomba),
		OBJECT(192, -16259, 12499, 5127, 0, 0, 0, 0x0, bhvGoomba),
		OBJECT(0, -12521, 5599, -123, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, -4001, 6625, -361, 0, -6, 0, 0x4000000, bhvHiddenRedCoinStar),
		OBJECT(0, -17599, 6531, -13330, 0, 0, 0, 0x3000000, bhvHiddenStar),
		OBJECT(0, -5024, 9694, -9120, 0, 1, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, -5065, 12940, -9157, 0, 92, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, -6701, 16203, -9355, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, -6464, 15982, -9372, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(0, -6979, 16447, -9361, 0, 0, 0, 0x0, bhvHiddenStarTrigger),
		OBJECT(124, -16257, 8875, -13572, 0, 0, 0, 0x120000, bhvMessagePanel),
		OBJECT(116, -6701, 16203, -9355, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, -6464, 15982, -9372, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, -6979, 16447, -9361, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, -5065, 12940, -9157, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(116, -5024, 9694, -9120, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(217, 3487, 9316, -8403, 0, 0, 0, 0x0, bhvPushableMetalBox),
		OBJECT(217, -15112, 5957, 6979, 0, 0, 0, 0x0, bhvPushableMetalBox),
		OBJECT(217, -15105, 5957, 7257, 0, 0, 0, 0x0, bhvPushableMetalBox),
		OBJECT(215, -18472, 11560, -968, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -9061, 4899, -117, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 923, 2697, -5858, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 2450, 3699, 1881, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -648, 6997, -1538, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 4463, 3569, 14822, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -12762, 6558, -1715, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -16372, 7298, -4563, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(101, -18469, 12258, -2282, 0, 0, 0, 0x0, bhvScuttlebug),
		OBJECT(101, -362, 15721, 8250, 0, 0, 0, 0x0, bhvScuttlebug),
		OBJECT(101, 1811, 15721, 2865, 0, 0, 0, 0x0, bhvScuttlebug),
		OBJECT(101, -3693, 2621, 6643, 0, 0, 0, 0x0, bhvScuttlebug),
		OBJECT(101, -4001, 2922, 9229, 0, 0, 0, 0x0, bhvScuttlebug),
		OBJECT(206, -7961, 16002, -10239, 0, 0, 0, 0x0, bhvSnufit),
		OBJECT(206, -18710, 13624, 8390, 0, -89, 0, 0x0, bhvSnufit),
		OBJECT(206, -3587, 2931, 2806, 0, 92, 0, 0x0, bhvSnufit),
		OBJECT(206, -5411, 4397, -8575, 0, 0, 0, 0x0, bhvSnufit),
		OBJECT(206, -9502, 15906, 9236, 0, 0, 0, 0x0, bhvSnufit),
		OBJECT(206, -7296, 15869, 9557, 0, 0, 0, 0x0, bhvSnufit),
		OBJECT(206, -5033, 15807, 9365, 0, 0, 0, 0x0, bhvSnufit),
		OBJECT(0, 310, 2524, -5027, 0, 0, 0, 0xa0000, bhvSpinAirborneWarp),
		OBJECT(122, -3903, 3258, 315, 0, 0, 0, 0x1000000, bhvStar),
		OBJECT(122, 3495, 10151, -8421, 0, 44, 0, 0x2000000, bhvStar),
		OBJECT(122, 636, 3539, 18004, 0, 0, 0, 0x5000000, bhvStar),
		OBJECT(25, -12762, 5631, -1715, 0, 0, 0, 0x0, bhvTree),
		TERRAIN(wf_area_1_collision),
		MACRO_OBJECTS(wf_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 38),
		TERRAIN_TYPE(TERRAIN_GRASS),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
