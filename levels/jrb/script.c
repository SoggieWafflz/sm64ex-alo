#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/jrb/header.h"

const LevelScript level_jrb_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _jrb_segment_7SegmentRomStart, _jrb_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0B, _effect_mio0SegmentRomStart, _effect_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _water_mio0SegmentRomStart, _water_mio0SegmentRomEnd), 
	LOAD_MIO0(0x0A, _water_skybox_mio0SegmentRomStart, _water_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group7_mio0SegmentRomStart, _group7_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group7_geoSegmentRomStart, _group7_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group13_mio0SegmentRomStart, _group13_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group13_geoSegmentRomStart, _group13_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_8), 
	JUMP_LINK(script_func_global_14), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_LEFT_HALF_PART, jrb_geo_000978), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_LEFT_PART, jrb_geo_0009B0), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_RIGHT_HALF_PART, jrb_geo_0009E8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_RIGHT_PART, jrb_geo_000A00), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP, jrb_geo_000990), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP_BACK, jrb_geo_0009C8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_ROCK, jrb_geo_000930), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SLIDING_BOX, jrb_geo_000960), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR, jrb_geo_000900), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR_BASE, jrb_geo_000918), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FLOATING_PLATFORM, jrb_geo_000948), 
	LOAD_MODEL_FROM_GEO(MODEL_THI_WARP_PIPE, warp_pipe_geo), 

	AREA(1, jrb_area_1),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_CASTLE_GROUNDS, 0x01, 0x3B, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_CASTLE_GROUNDS, 0x01, 0x3C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_JRB, 0x02, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(0, 10003, 4218, 3883, 0, -27, 0, 0x00100000, bhvCoinFormation),
		OBJECT(0, 12435, 4204, 3902, 0, 29, 0, 0x00100000, bhvCoinFormation),
		OBJECT(MODEL_BLUE_COIN, -6796, 2321, 8017, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN_SWITCH, -6458, 1697, 10702, 0, 0, 0, 0, bhvBlueCoinSwitch),
		OBJECT(MODEL_BLUE_COIN, -6796, 2321, 7361, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -6796, 2321, 6468, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5688, 2321, 4508, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLUE_COIN, -5493, 2321, 4107, 0, 0, 0, 0, bhvHiddenBlueCoin),
		OBJECT(MODEL_BLACK_BOBOMB, -1515, 1070, -1364, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, 1159, 1070, 2422, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, -2687, 1070, 3179, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, 4261, 1070, -3098, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, 4506, 1676, -852, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, 1634, 963, 8746, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_BLACK_BOBOMB, -4022, 1108, 9801, 0, 0, 0, 0, bhvBobomb),
		OBJECT(MODEL_CHUCKYA, 6863, 2419, -1654, 0, -45, 0, 0, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 9313, 3622, -1077, 0, -45, 0, 0, bhvChuckya),
		OBJECT(MODEL_CHUCKYA, 8657, 5585, 8184, 0, -45, 0, 0, bhvChuckya),
		OBJECT(253, 1296, 2582, -66, 0, 0, 0, 0x00000000, bhv_Crane),
		OBJECT(253, 171, 2582, 2720, 0, -180, 0, 0x00000000, bhv_CraneUP),
		OBJECT(253, 11697, -1909, 10225, 0, -93, 0, 0x00000000, bhv_CraneUP),
		OBJECT(MODEL_BOWLING_BALL, -6681, 2399, 9223, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -6455, 3725, 10660, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 195, 3090, 3000, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 4983, 2591, -1818, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, 11170, 5438, 5362, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(MODEL_BOWLING_BALL, -4891, 2308, 7825, 0, 0, 0, 0, bhvFireSpitter),
		OBJECT(0, 4357, 1034, 8414, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 3278, 1034, 8414, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 3250, 2666, 11579, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 4301, 2666, 11579, 0, -90, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -6483, 3535, 10896, 0, 0, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -297, 1156, 4120, 0, 50, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, 2953, 1156, -524, 0, 61, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -681, 1156, 6, 0, 170, 0, 0x00000000, bhvCoinFormation),
		OBJECT(0, -4895, 1916, 7824, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, -3139, 5265, 11052, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, 318, 1221, 1988, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, 10459, -3262, -4533, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, 7758, -3292, 4730, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, 8664, -3461, 10949, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(MODEL_NONE, 2871, 1277, -2237, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, 477, 1277, 7975, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, -898, 2235, 10177, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, -4223, 1307, 5862, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, -6188, 1307, 10058, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(MODEL_NONE, 3935, 1140, 10842, 0, 0, 0, 0, bhvGoombaTripletSpawner),
		OBJECT(252, 7173, 2802, -3021, 0, 48, 0, 0x00020000, bhv_Mesh),
		OBJECT(252, 9643, 3508, -2502, 0, -72, 0, 0, bhv_Mesh),
		OBJECT(252, 8633, 7265, 8167, 0, -43, 0, 0x00020000, bhv_Mesh),
		OBJECT(252, 11205, 4884, 6, 0, -41, 0, 0x00020000, bhv_Mesh),
		OBJECT(252, 10767, 4884, 565, 0, -41, 0, 0x00020000, bhv_Mesh),
		OBJECT(MODEL_RED_COIN, 5460, 2360, -3888, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 3590, 2360, -4322, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 5265, 3002, -72, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 1296, 2793, -327, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -1659, 2882, 5188, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -4892, 1960, 7823, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, 3820, 2286, 8286, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_RED_COIN, -2844, 4408, 6416, 0, 0, 0, 0, bhvRedCoin),
		OBJECT(MODEL_STAR, 2269, 5340, 10744, 0, 0, 0, 0, bhvStar),
		OBJECT(MODEL_STAR, 6529, 7986, 3469, 0, 0, 0, 0x01000000, bhvStar),
		OBJECT(MODEL_STAR, 2960, 6781, 4650, 0, 0, 0, 0x02000000, bhvStar),
		OBJECT(MODEL_NONE, 4032, 1412, -2678, 0, 0, 0, 0x03000000, bhvHiddenRedCoinStar),
		OBJECT(MODEL_PENGUIN, 12308, 347, 4704, 0, -45, 0, 0x05000000, bhvTuxiesMother),
		OBJECT(MODEL_PENGUIN, 12041, -3058, 11318, 0, -45, 0, 0, bhvSmallPenguin),
		OBJECT(MODEL_PENGUIN, 12409, -3358, -5444, 0, -45, 0, 0, bhvSmallPenguin),
		OBJECT(MODEL_PENGUIN, 12122, -3218, 3628, 0, -45, 0, 0, bhvSmallPenguin),
		OBJECT(MODEL_NONE, 2187, 1596, 6451, 0, 0, 0, 0x000A0000, bhvAirborneWarp),
		OBJECT(MODEL_THI_WARP_PIPE, 5638, 1003, -7918, 0, 0, 0, 0x000B0000, bhvWarpPipe),
		OBJECT(255, -5699, 4440, 11197, 0, 0, 0, 0x00020000, WaterCube_UPDown),
		OBJECT(255, -1707, 2325, 5574, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, -2473, 3662, 6394, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(255, 10116, 5089, 4904, 0, 0, 0, 0x00020000, WaterCube_UPDown),
		OBJECT(255, 12314, 5089, 4806, 0, 0, 0, 0, WaterCube_UPDown),
		OBJECT(0, -4812, 4701, 10527, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -1705, 1369, 5581, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -2474, 3028, 6397, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 6404, 2561, 514, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -277, 1758, 8984, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 8480, 5867, 8355, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, 8480, 6706, 8355, 0, -180, 0, 0x00110000, bhvCoinFormation),
		TERRAIN(jrb_area_1_collision),
		MACRO_OBJECTS(jrb_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 0x9),
		TERRAIN_TYPE(TERRAIN_GRASS),
	END_AREA(),

	AREA(2, jrb_area_2),
		WARP_NODE(0x0A, LEVEL_BOB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_JRB, 0x01, 0x3B, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_CASTLE_GROUNDS, 0x01, 0x3C, WARP_NO_CHECKPOINT),
		WARP_NODE(0x0B, LEVEL_JRB, 0x01, 0x0A, WARP_NO_CHECKPOINT),
		OBJECT(0, -13346, 3025, -12544, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(0, -11148, 3025, -13690, 0, -90, 0, 0x00120000, bhvCoinFormation),
		OBJECT(252, -12427, -2102, -5342, 0, 0, 0, 0x00020000, bhv_Mesh),
		OBJECT(253, -10888, -3168, 1038, 0, -90, 0, 0x00020000, bhv_CraneUP),
		OBJECT(253, -13869, -3168, -547, 0, 90, 0, 0x00020000, bhv_Crane),
		OBJECT(252, -12427, 1027, -8516, 0, 0, 0, 0, bhv_Mesh),
		OBJECT(252, -12957, 3364, -8566, 0, -45, 0, 0x00020000, bhv_Mesh),
		OBJECT(253, -10888, -3168, -2099, 0, -90, 0, 0x00020000, bhv_CraneUP),
		OBJECT(253, -13869, -3168, -3606, 0, 90, 0, 0x00020000, bhv_Crane),
		OBJECT(253, -12390, -442, -9670, 0, 0, 0, 0x00020000, bhv_CraneUP),
		OBJECT(252, -12804, -3543, 3413, 0, -90, 0, 0, bhv_Mesh),
		OBJECT(MODEL_STAR, -12427, 4425, -16231, 0, -90, 0, 0x05000000, bhvStar),
		OBJECT(MODEL_NONE, -12395, -4280, 4983, 0, -180, 0, 0x000A0000, bhvAirborneWarp),
		OBJECT(MODEL_THI_WARP_PIPE, -12393, 3896, -17146, 0, 0, 0, 0x000B0000, bhvWarpPipe),
		OBJECT(0, -12450, -2976, -5665, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -12360, -1732, -10925, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -12409, 123, -8165, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -13322, 2372, -8080, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -10641, -2865, -2071, 0, -180, 0, 0x00110000, bhvCoinFormation),
		OBJECT(0, -14140, -2865, -537, 0, -180, 0, 0x00110000, bhvCoinFormation),
		TERRAIN(jrb_area_2_collision),
		MACRO_OBJECTS(jrb_area_2_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 0xA),
		TERRAIN_TYPE(TERRAIN_GRASS),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
