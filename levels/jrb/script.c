#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"

#include "game/level_update.h"

#include "levels/scripts.h"

#include "actors/common1.h"

#include "make_const_nonconst.h"
#include "levels/jrb/header.h"

const LevelScript level_jrb_entry[] = {
	INIT_LEVEL(),
	LOAD_MIO0(0x07, _jrb_segment_7SegmentRomStart, _jrb_segment_7SegmentRomEnd), 
	LOAD_MIO0(0x0B, _effect_mio0SegmentRomStart, _effect_mio0SegmentRomEnd), 
	LOAD_MIO0_TEXTURE(0x09, _water_mio0SegmentRomStart, _water_mio0SegmentRomEnd), 
	LOAD_MIO0(0x0A, _water_skybox_mio0SegmentRomStart, _water_skybox_mio0SegmentRomEnd), 
	LOAD_MIO0(0x05, _group4_mio0SegmentRomStart, _group4_mio0SegmentRomEnd), 
	LOAD_RAW(0x0C, _group4_geoSegmentRomStart, _group4_geoSegmentRomEnd), 
	LOAD_MIO0(0x06, _group13_mio0SegmentRomStart, _group13_mio0SegmentRomEnd), 
	LOAD_RAW(0x0D, _group13_geoSegmentRomStart, _group13_geoSegmentRomEnd), 
	LOAD_MIO0(0x08, _common0_mio0SegmentRomStart, _common0_mio0SegmentRomEnd), 
	LOAD_RAW(0x0F, _common0_geoSegmentRomStart, _common0_geoSegmentRomEnd), 
	ALLOC_LEVEL_POOL(),
	MARIO(MODEL_MARIO, 0x00000001, bhvMario), 
	JUMP_LINK(script_func_global_1), 
	JUMP_LINK(script_func_global_5), 
	JUMP_LINK(script_func_global_14), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_LEFT_HALF_PART, jrb_geo_000978), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_LEFT_PART, jrb_geo_0009B0), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_RIGHT_HALF_PART, jrb_geo_0009E8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SHIP_BACK_RIGHT_PART, jrb_geo_000A00), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP, jrb_geo_000990), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SUNKEN_SHIP_BACK, jrb_geo_0009C8), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_ROCK, jrb_geo_000930), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_SLIDING_BOX, jrb_geo_000960), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR, jrb_geo_000900), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FALLING_PILLAR_BASE, jrb_geo_000918), 
	LOAD_MODEL_FROM_GEO(MODEL_JRB_FLOATING_PLATFORM, jrb_geo_000948), 

	AREA(1, jrb_area_1),
		WARP_NODE(6, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(5, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(4, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		WARP_NODE(50, LEVEL_JRB, 1, 40, WARP_NO_CHECKPOINT),
		WARP_NODE(40, LEVEL_JRB, 1, 50, WARP_NO_CHECKPOINT),
		WARP_NODE(30, LEVEL_JRB, 1, 20, WARP_NO_CHECKPOINT),
		WARP_NODE(20, LEVEL_JRB, 1, 30, WARP_NO_CHECKPOINT),
		WARP_NODE(241, LEVEL_CASTLE_COURTYARD, 1, 131, WARP_NO_CHECKPOINT),
		WARP_NODE(240, LEVEL_CASTLE_COURTYARD, 1, 130, WARP_NO_CHECKPOINT),
		WARP_NODE(14, LEVEL_BOB, 1, 13, WARP_NO_CHECKPOINT),
		WARP_NODE(13, LEVEL_BOB, 1, 14, WARP_NO_CHECKPOINT),
		WARP_NODE(12, LEVEL_BOB, 1, 11, WARP_NO_CHECKPOINT),
		WARP_NODE(11, LEVEL_BOB, 1, 12, WARP_NO_CHECKPOINT),
		WARP_NODE(10, LEVEL_BOB, 1, 10, WARP_NO_CHECKPOINT),
		OBJECT(212, -342, 68, -12036, 0, 0, 0, 0x0, bhv1Up),
		OBJECT(140, 8042, -2124, -4877, 0, -11, 0, 0x0, bhvBlueCoinSwitch),
		OBJECT(188, -915, -799, -8423, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, -5554, 529, -8535, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 1568, -799, -13488, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 1317, -799, -16815, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 1119, -799, -11360, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 4234, -799, -15308, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 1313, -799, -20341, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, -1013, -799, -12484, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, -1331, -799, -21594, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(188, 1050, 1443, -18909, 0, 0, 0, 0x0, bhvBobomb),
		OBJECT(129, -5489, 307, -9288, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, -484, -1014, -9779, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 353, -1016, -12374, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 2986, -1028, -12156, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 3454, -1021, -15134, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 434, -1041, -17424, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 2213, -1049, -18932, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, -1978, -1064, -20085, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 2143, 1225, -17761, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 2305, 1325, -17582, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(129, 2467, 1425, -17412, 0, 0, 0, 0x0, bhvBreakableBox),
		OBJECT(122, -4294, -2315, -1177, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(122, -5235, -490, 936, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(122, 407, -799, -8542, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(122, -13332, -799, 15792, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(122, -1084, -799, -16265, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(122, -2881, -799, -18519, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, 3202, 1712, -16475, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(223, -2428, 1019, 16260, 0, 0, 0, 0x0, bhvChuckya),
		OBJECT(0, -925, -1636, -3099, 0, -15, 0, 0x0, bhvCoinFormation),
		OBJECT(0, -7872, -3893, -1743, 0, 0, 0, 0x20000, bhvCoinFormation),
		OBJECT(0, -6519, 529, -7151, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, -2937, 446, -14607, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, -412, -799, -19571, 0, 0, 0, 0x0, bhvCoinFormation),
		OBJECT(0, -3912, 894, 18207, 0, -47, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 750, -3893, -8018, 0, 90, 0, 0x0, bhvCoinFormation),
		OBJECT(0, 4167, -799, -18928, 0, 0, 0, 0x110000, bhvCoinFormation),
		OBJECT(0, 3694, -3893, 3885, 0, 0, 0, 0x0, bhvCoinFormation),
		OBJECT(137, -9942, 648, 12714, 0, 17, 0, 0xa0000, bhvExclamationBox),
		OBJECT(137, 8544, -1866, -1566, 0, 0, 0, 0x30000, bhvExclamationBox),
		OBJECT(137, 1317, 2176, -12306, 0, 0, 0, 0x60000, bhvExclamationBox),
		OBJECT(0, 21, -799, -11536, 0, 158, 0, 0x280000, bhvFadingWarp),
		OBJECT(0, 4952, -2333, 3722, 0, 0, 0, 0x320000, bhvFadingWarp),
		OBJECT(180, -6764, -1511, -2902, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -4932, 810, 9666, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -455, -848, -5828, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 3384, 1837, -13326, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -781, 965, -18288, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -3726, 1157, 6603, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -9627, 873, 19684, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -8429, 873, 19490, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -6762, 873, 19081, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, -97, 2003, -13690, 0, 0, 0, 0x0, bhvFireSpitter),
		OBJECT(180, 3407, 1722, -15086, 0, -180, 0, 0x0, bhvFireSpitter),
		OBJECT(207, -4652, -2315, -2469, 0, 2, 0, 0x0, bhvFloorSwitchHiddenObjects),
		OBJECT(122, 3093, 1822, 15501, 0, 0, 0, 0x0, bhvFlyGuy),
		OBJECT(220, 997, 2610, -12107, 0, 0, 0, 0x10000, bhvFlyGuy),
		OBJECT(0, -2971, -2006, -2540, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 415, -1372, -4156, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, -5681, -551, 227, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, -16495, 575, 17886, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 339, -639, -21448, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, -4681, 446, -18809, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(0, 4820, -2293, 5175, 0, 0, 0, 0x0, bhvGoombaTripletSpawner),
		OBJECT(118, 6900, -1920, -6159, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 8239, -1799, -7342, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 7775, -1799, -7499, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 7820, -1799, -8033, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 8313, -1799, -8123, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(118, 8581, -1799, -7705, 0, 0, 0, 0x0, bhvHiddenBlueCoin),
		OBJECT(129, -5428, -2089, -2664, 0, 0, 0, 0x0, bhvHiddenObject),
		OBJECT(129, -7270, -1606, -4089, 0, -34, 0, 0x0, bhvHiddenObject),
		OBJECT(129, -9352, -1258, -2522, 0, 58, 0, 0x0, bhvHiddenObject),
		OBJECT(129, -7634, -881, 158, 0, -4, 0, 0x0, bhvHiddenObject),
		OBJECT(20, -3845, 562, -10494, 0, -24, 0, 0x5000000, bhvHiddenRedCoinStar),
		OBJECT(116, 14, -853, -11533, 0, 0, 0, 0x0, bhvOneCoin),
		OBJECT(215, -5491, 367, -9280, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -10613, -2379, 15153, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -16245, 1391, 18983, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 3001, -968, -12145, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 2641, -746, -20087, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, 8458, -1643, -2236, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -1463, -746, -7337, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(215, -4244, -746, -18697, 0, 0, 0, 0x0, bhvRedCoin),
		OBJECT(105, -627, -2477, 5264, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -7794, -2477, -1491, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, 2961, -2477, 390, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, 3928, -2477, -7385, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, 6721, -2477, 1010, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -9681, -2477, 16465, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -13640, -2477, 18449, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -2416, -2315, 875, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -8622, -1240, -3603, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -2250, -799, -9985, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(105, -3341, 446, -16025, 0, 0, 0, 0x0, bhvSkeeter),
		OBJECT(0, -4319, 513, -11539, 0, 90, 0, 0xa0000, bhvSpinAirborneWarp),
		OBJECT(122, -395, 2795, -15612, 0, 0, 0, 0x0, bhvStar),
		OBJECT(122, 2517, 1604, 13868, 0, 0, 0, 0x2000000, bhvStar),
		OBJECT(122, -5675, -3568, -13349, 0, 0, 0, 0x3000000, bhvStar),
		OBJECT(122, 3588, -1884, 6322, 0, 0, 0, 0x4000000, bhvStar),
		OBJECT(86, 8443, -3110, -4049, 0, 0, 0, 0x0, bhvSushiShark),
		OBJECT(86, -2442, -3123, 10359, 0, 0, 0, 0x0, bhvSushiShark),
		OBJECT(22, -3426, -2315, 630, 0, 92, 0, 0x140000, bhvWarpPipe),
		OBJECT(22, -11574, -799, 14957, 0, -77, 0, 0x1e0000, bhvWarpPipe),
		TERRAIN(jrb_area_1_collision),
		MACRO_OBJECTS(jrb_area_1_macro_objs),
		SET_BACKGROUND_MUSIC(0x00, 4),
		TERRAIN_TYPE(TERRAIN_GRASS),
	END_AREA(),

	FREE_LEVEL_POOL(),
	MARIO_POS(1, 0, 0, 0, 0),
	CALL(0, lvl_init_or_update),
	CALL_LOOP(1, lvl_init_or_update),
	CLEAR_LEVEL(),
	SLEEP_BEFORE_EXIT(1),
	EXIT(),
};
