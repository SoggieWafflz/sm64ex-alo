#include <ultra64.h>
#include "sm64.h"
#include "behavior_data.h"
#include "model_ids.h"
#include "seq_ids.h"
#include "dialog_ids.h"
#include "segment_symbols.h"
#include "level_commands.h"
#include "game/level_update.h"
#include "levels/scripts.h"
#include "actors/common1.h"
#include "make_const_nonconst.h"

#include "areas/1/custom.model.inc.h"
#include "levels/ttm/header.h"
extern u8 _ttm_segment_ESegmentRomStart[]; 
extern u8 _ttm_segment_ESegmentRomEnd[];
#include "levels/bbh/header.h"
const LevelScript level_ttm_custom_entry[] = {
INIT_LEVEL(),
LOAD_MIO0(0x07, _bbh_segment_7SegmentRomStart, _bbh_segment_7SegmentRomEnd),
LOAD_RAW(0x1A, _bbhSegmentRomStart, _bbhSegmentRomEnd),
LOAD_RAW(0x0E, _ttm_segment_ESegmentRomStart, _ttm_segment_ESegmentRomEnd),
LOAD_MIO0(0xA,_wdw_skybox_mio0SegmentRomStart,_wdw_skybox_mio0SegmentRomEnd),
LOAD_MIO0(8,_common0_mio0SegmentRomStart,_common0_mio0SegmentRomEnd),
LOAD_RAW(15,_common0_geoSegmentRomStart,_common0_geoSegmentRomEnd),
LOAD_MIO0(5,_group9_mio0SegmentRomStart,_group9_mio0SegmentRomEnd),
LOAD_RAW(12,_group9_geoSegmentRomStart,_group9_geoSegmentRomEnd),
LOAD_MIO0(6,_group17_mio0SegmentRomStart,_group17_mio0SegmentRomEnd),
LOAD_RAW(13,_group17_geoSegmentRomStart,_group17_geoSegmentRomEnd),
ALLOC_LEVEL_POOL(),
MARIO(/*model*/ MODEL_MARIO, /*behParam*/ 0x00000001, /*beh*/ bhvMario),
LOAD_MODEL_FROM_GEO(MODEL_BBH_HAUNTED_DOOR,           haunted_door_geo),
LOAD_MODEL_FROM_GEO(MODEL_BBH_STAIRCASE_STEP,         geo_bbh_0005B0),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TILTING_FLOOR_PLATFORM, geo_bbh_0005C8),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TUMBLING_PLATFORM,      geo_bbh_0005E0),
LOAD_MODEL_FROM_GEO(MODEL_BBH_TUMBLING_PLATFORM_PART, geo_bbh_0005F8),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MOVING_BOOKSHELF,       geo_bbh_000610),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MESH_ELEVATOR,          geo_bbh_000628),
LOAD_MODEL_FROM_GEO(MODEL_BBH_MERRY_GO_ROUND,         geo_bbh_000640),
LOAD_MODEL_FROM_GEO(MODEL_BBH_WOODEN_TOMB,            geo_bbh_000658),
LOAD_MODEL_FROM_GEO(22, warp_pipe_geo),
LOAD_MODEL_FROM_GEO(23, bubbly_tree_geo),
LOAD_MODEL_FROM_GEO(24, spiky_tree_geo),
LOAD_MODEL_FROM_GEO(25, snow_tree_geo),
LOAD_MODEL_FROM_GEO(27, palm_tree_geo),
LOAD_MODEL_FROM_GEO(29, haunted_door_geo),
LOAD_MODEL_FROM_GEO(31, metal_door_geo),
LOAD_MODEL_FROM_GEO(32, hazy_maze_door_geo),
LOAD_MODEL_FROM_GEO(34, castle_door_0_star_geo),
LOAD_MODEL_FROM_GEO(35, castle_door_1_star_geo),
LOAD_MODEL_FROM_GEO(36, castle_door_3_stars_geo),
LOAD_MODEL_FROM_GEO(37, key_door_geo),
LOAD_MODEL_FROM_GEO(38, castle_door_geo),
// LOAD_MODEL_FROM_DL(132,0x08025f08,4),
// LOAD_MODEL_FROM_DL(158,0x0302c8a0,4),
// LOAD_MODEL_FROM_DL(159,0x0302bcd0,4),
// LOAD_MODEL_FROM_DL(161,0x0301cb00,4),
// LOAD_MODEL_FROM_DL(164,0x04032a18,4),
// LOAD_MODEL_FROM_DL(201,0x080048e0,4),
// LOAD_MODEL_FROM_DL(218,0x08024bb8,4),
JUMP_LINK(script_func_global_1),
JUMP_LINK(script_func_global_10),
JUMP_LINK(script_func_global_18),
JUMP_LINK(local_area_ttm_1_),
FREE_LEVEL_POOL(),
MARIO_POS(1,135,-6558,0,6464),
CALL(/*arg*/ 0, /*func*/ lvl_init_or_update),
CALL_LOOP(/*arg*/ 1, /*func*/ lvl_init_or_update),
CLEAR_LEVEL(),
SLEEP_BEFORE_EXIT(/*frames*/ 1),
EXIT(),
};
const LevelScript local_area_ttm_1_[] = {
AREA(1,Geo_ttm_1_0x3b41700),
TERRAIN(col_ttm_1_0xe032598),
SET_BACKGROUND_MUSIC(0,54),
TERRAIN_TYPE(0),
JUMP_LINK(local_objects_ttm_1_),
JUMP_LINK(local_warps_ttm_1_),
END_AREA(),
RETURN()
};
const LevelScript local_objects_ttm_1_[] = {
OBJECT_WITH_ACTS(0,11235,-1222,-8146,0,-90,0,0xa0000, bhvSpinAirborneWarp,31),
OBJECT_WITH_ACTS(139,-790,-1987,-6363,90,90,0,0xb0000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,-1923,-2018,-9198,90,-90,0,0xc0000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,-3590,3707,-11196,90,0,0,0xd0000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,-11341,-2016,1145,90,0,0,0xe0000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(122,2000,2208,-758,0,0,0,0x0, bhvStar,31),
OBJECT_WITH_ACTS(207,963,-2094,-7358,0,0,0,0x0, bhvFloorSwitchHiddenObjects,31),
OBJECT_WITH_ACTS(129,0,-2094,-5198,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,0,-2094,-4003,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,0,-2094,-2823,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,0,-2094,-1635,0,0,0,0x0, bhvHiddenObject,113),
OBJECT_WITH_ACTS(137,723,-1600,-858,0,0,0,0x10000, bhvExclamationBox,31),
OBJECT_WITH_ACTS(122,-10703,3400,775,0,0,0,0x1000000, bhvStar,31),
OBJECT_WITH_ACTS(122,7923,5350,-11378,0,0,0,0x2000000, bhvStar,31),
OBJECT_WITH_ACTS(139,-8769,1503,1740,90,0,0,0x50000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,-272,-1919,-11096,90,0,0,0x10000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,3039,3845,-10917,90,0,0,0x20000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(139,-11908,-1863,-12303,90,0,0,0x40000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,-3460,5486,-7421,0,0,0,0x0, bhvFadingWarp,31),
OBJECT_WITH_ACTS(0,11338,5745,-12508,0,0,0,0x60000, bhvFadingWarp,31),
OBJECT_WITH_ACTS(129,3550,2700,-11330,0,0,0,0x0, bhvBreakableBox,31),
OBJECT_WITH_ACTS(122,-9903,6000,-845,0,0,0,0x3000000, bhvStar,31),
OBJECT_WITH_ACTS(207,-11623,-2094,-11073,0,0,0,0x0, bhvFloorSwitchHiddenObjects,31),
OBJECT_WITH_ACTS(129,-11095,-2094,-9838,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(1,-11568,-1500,-12445,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(129,-11023,-2094,-8508,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-10873,-2094,-7188,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-10673,-2094,-5905,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-10623,-2094,-4703,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-10593,-2094,-3410,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-10823,-2094,-2240,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-11673,-2094,-1605,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-9345,-2094,-2963,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-8020,-2094,-2600,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-6748,-2094,-2273,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-5510,-2094,-1910,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-4355,-2094,-1695,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(129,-3083,-2094,-1473,0,0,0,0x0, bhvHiddenObject,31),
OBJECT_WITH_ACTS(0,990,-2030,2820,0,0,0,0x0, bhvHiddenStarTrigger,31),
OBJECT_WITH_ACTS(0,-858,-2042,4305,0,0,0,0x0, bhvHiddenStarTrigger,31),
OBJECT_WITH_ACTS(0,-4795,-2061,2868,0,0,0,0x0, bhvHiddenStarTrigger,31),
OBJECT_WITH_ACTS(0,-4985,-2053,7123,0,0,0,0x0, bhvHiddenStarTrigger,31),
OBJECT_WITH_ACTS(0,-6790,-1957,11428,0,0,0,0x0, bhvHiddenStarTrigger,31),
OBJECT_WITH_ACTS(0,630,5533,10835,0,0,0,0x4000000, bhvHiddenStar,31),
OBJECT_WITH_ACTS(0,-1755,-1200,-1573,0,0,0,0x5000000, bhvHiddenRedCoinStar,31),
OBJECT_WITH_ACTS(215,-3870,-328,-10945,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-8923,-542,9300,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,1280,-1960,1133,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-12398,-1200,-12250,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,4708,1550,-5080,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,5515,3250,-11220,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-3493,3713,-7915,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(215,-1743,-1962,-1145,0,0,0,0x0, bhvRedCoin,31),
OBJECT_WITH_ACTS(0,308,-2033,9115,0,0,0,0x110000, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,5360,954,-6383,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,-2908,-1622,-10328,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,7223,-1880,-8500,0,0,0,0x0, bhvFlamethrower,31),
OBJECT_WITH_ACTS(0,6308,-1800,-8228,0,0,0,0x0, bhvFlamethrower,31),
OBJECT_WITH_ACTS(180,6335,-1983,-6798,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,8335,-1936,-7858,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,8335,-1936,-8555,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,8825,-1936,-8553,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,8825,-1936,-7855,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,1595,-2038,-5828,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,153,-2009,-6395,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(0,1003,-2016,-6360,0,0,0,0x110000, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,-10960,-1802,9893,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,-10258,-1390,9213,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,1588,3217,10265,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,608,3217,9513,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,-233,3394,10103,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,303,3535,10738,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(180,2760,1610,-11733,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(0,2273,1610,-11495,0,0,0,0x20000, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,2295,1610,-11628,0,0,0,0x0, bhvGoombaTripletSpawner,31),
OBJECT_WITH_ACTS(223,2800,1610,-11273,0,0,0,0x0, bhvChuckya,31),
OBJECT_WITH_ACTS(0,4718,4447,-11645,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,6133,4447,-10150,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,6550,4492,-10583,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,6165,4658,-10973,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,5815,4831,-11555,0,0,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(0,6498,4896,-12045,0,90,0,0x0, bhvCoinFormation,31),
OBJECT_WITH_ACTS(140,7470,4899,-12060,0,90,0,0x0, bhvBlueCoinSwitch,31),
OBJECT_WITH_ACTS(118,7690,4999,-11713,0,0,0,0x0, bhvHiddenBlueCoin,31),
OBJECT_WITH_ACTS(118,7698,4999,-10865,0,0,0,0x0, bhvHiddenBlueCoin,31),
OBJECT_WITH_ACTS(118,8128,4999,-11720,0,0,0,0x0, bhvHiddenBlueCoin,31),
OBJECT_WITH_ACTS(118,8145,4999,-10860,0,0,0,0x0, bhvHiddenBlueCoin,31),
OBJECT_WITH_ACTS(180,5480,4447,-11613,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,5483,4447,-10873,0,0,0,0x0, bhvFireSpitter,31),
OBJECT_WITH_ACTS(180,5483,4447,-10333,0,0,0,0x0, bhvFireSpitter,31),
RETURN()
};
const LevelScript local_warps_ttm_1_[] = {
WARP_NODE(10,36,1,10,0),
WARP_NODE(11,36,1,12,0),
WARP_NODE(12,36,1,11,0),
WARP_NODE(13,36,1,14,0),
WARP_NODE(14,36,1,13,0),
WARP_NODE(240,26,1,120,0),
WARP_NODE(241,26,1,121,0),
WARP_NODE(0,36,1,6,0),
WARP_NODE(1,36,1,5,0),
WARP_NODE(2,36,1,4,0),
WARP_NODE(3,36,1,0,0),
WARP_NODE(4,36,1,2,0),
WARP_NODE(5,36,1,1,0),
WARP_NODE(6,36,1,0,0),
RETURN()
};
